<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>MAHER PLATFORM PRO</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Cairo}
body{background:#0a0a0a;color:#fff;overflow:hidden}
button{cursor:pointer}
.full{position:fixed;inset:0;background:rgba(0,0,0,.95);display:none;align-items:center;justify-content:center;z-index:999}
.box{background:#161616;border-radius:15px;padding:20px;width:100%;max-width:900px;max-height:90vh;overflow:auto}
input,textarea{width:100%;padding:12px;background:#222;border:1px solid #444;color:#fff;border-radius:10px;margin:8px 0}
.btn{background:#bc202b;border:none;color:#fff;padding:12px;border-radius:10px;font-weight:900}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.card{background:#1a1a1a;border:1px solid #333;padding:15px;border-radius:12px;text-align:center}
.list-item{border-bottom:1px solid #333;padding:10px}
.list-item span{display:block;color:#aaa;font-size:13px}
header{height:60px;background:#161616;display:flex;align-items:center;justify-content:space-between;padding:0 15px}
main{padding:15px;overflow:auto;height:calc(100vh - 60px)}
.video{background:#000;border-radius:15px;aspect-ratio:16/9;margin-bottom:15px}
</style>
</head>

<body>

<header>
<b>MAHER PLATFORM</b>
<i class="fas fa-user-cog" onclick="openLogin()"></i>
</header>

<main>
<div class="video" id="player"></div>
<h2 id="title"></h2>
<p id="desc" style="color:#aaa"></p>
<hr>
<div id="videos"></div>
</main>

<!-- LOGIN -->
<div class="full" id="login">
<div class="box">
<h3>دخول الإدارة</h3>
<input id="u" placeholder="اسم المستخدم">
<input id="p" type="password" placeholder="كلمة المرور">
<button class="btn" onclick="login()">دخول</button>
</div>
</div>

<!-- ADMIN -->
<div class="full" id="admin">
<div class="box">

<h3 style="text-align:center">إدارة المحتوى</h3>

<div class="grid">
<div class="card" onclick="openAddVideo()"><i class="fas fa-video"></i><br>إضافة فيديو</div>
<div class="card" onclick="openAddImage()"><i class="fas fa-image"></i><br>إضافة صورة</div>
</div>

<hr>
<h4>الفيديوهات</h4>
<div id="adminVideos"></div>

<hr>
<h4>الصور</h4>
<div id="adminImages"></div>

<button class="btn" style="background:#333" onclick="closeAll()">إغلاق</button>

</div>
</div>

<!-- ADD VIDEO -->
<div class="full" id="addVideo">
<div class="box">
<h3>إضافة / تعديل فيديو</h3>
<input id="v_url" placeholder="رابط الفيديو">
<input id="v_title" placeholder="العنوان">
<textarea id="v_desc" placeholder="الوصف"></textarea>
<button class="btn" onclick="saveVideo()">حفظ</button>
<button class="btn" style="background:#333" onclick="closeAll()">إلغاء</button>
</div>
</div>

<!-- ADD IMAGE -->
<div class="full" id="addImage">
<div class="box">
<h3>إضافة / تعديل صورة</h3>
<input id="i_url" placeholder="رابط الصورة">
<input id="i_title" placeholder="العنوان">
<textarea id="i_desc" placeholder="الوصف"></textarea>
<button class="btn" onclick="saveImage()">حفظ</button>
<button class="btn" style="background:#333" onclick="closeAll()">إلغاء</button>
</div>
</div>

<script>
let DB=JSON.parse(localStorage.getItem("DB"))||{
auth:{u:"maher",p:"1234"},
videos:[],images:[]
}
let editIndex=null,editType=null

function save(){localStorage.setItem("DB",JSON.stringify(DB))}
function openLogin(){login.style.display="flex"}
function closeAll(){document.querySelectorAll(".full").forEach(x=>x.style.display="none")}
function login(){
if(u.value==DB.auth.u && p.value==DB.auth.p){
closeAll();admin.style.display="flex"
}else alert("خطأ")
}

function openAddVideo(i=null){
editIndex=i;editType="video"
if(i!=null){
let v=DB.videos[i]
v_url.value=v.u;v_title.value=v.t;v_desc.value=v.d
}else v_url.value=v_title.value=v_desc.value=""
addVideo.style.display="flex"
}

function saveVideo(){
let o={u:v_url.value,t:v_title.value,d:v_desc.value}
if(editIndex!=null)DB.videos[editIndex]=o
else DB.videos.push(o)
save();render();closeAll()
}

function openAddImage(i=null){
editIndex=i;editType="image"
if(i!=null){
let v=DB.images[i]
i_url.value=v.u;i_title.value=v.t;i_desc.value=v.d
}else i_url.value=i_title.value=i_desc.value=""
addImage.style.display="flex"
}

function saveImage(){
let o={u:i_url.value,t:i_title.value,d:i_desc.value}
if(editIndex!=null)DB.images[editIndex]=o
else DB.images.push(o)
save();render();closeAll()
}

function del(type,i){
if(type=="v")DB.videos.splice(i,1)
else DB.images.splice(i,1)
save();render()
}

function render(){
adminVideos.innerHTML=""
DB.videos.forEach((v,i)=>{
adminVideos.innerHTML+=`
<div class="list-item">
<b>${v.t}</b>
<span>${v.u}</span>
<button onclick="openAddVideo(${i})">تعديل</button>
<button onclick="del('v',${i})">حذف</button>
</div>`
})
adminImages.innerHTML=""
DB.images.forEach((v,i)=>{
adminImages.innerHTML+=`
<div class="list-item">
<b>${v.t}</b>
<span>${v.u}</span>
<button onclick="openAddImage(${i})">تعديل</button>
<button onclick="del('i',${i})">حذف</button>
</div>`
})
if(DB.videos[0]){
player.innerHTML=`<iframe width="100%" height="100%" src="${DB.videos[0].u.replace("watch?v=","embed/")}" allowfullscreen></iframe>`
title.innerText=DB.videos[0].t
desc.innerText=DB.videos[0].d
}
}
render()
</script>

</body>
</html>
