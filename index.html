<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>لوحة التحكم الذكية - Mahir</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js"></script>
    <style>
        :root {
            --primary: #00d2ff;
            --accent: #9d50bb;
            --dark: #0f0c29;
            --glass: rgba(255, 255, 255, 0.1);
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* القائمة الجانبية */
        #sidebar {
            position: fixed;
            left: -300px;
            top: 0;
            width: 300px;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(15px);
            transition: 0.5s cubic-bezier(0.77, 0, 0.175, 1);
            z-index: 1000;
            padding: 20px;
            box-shadow: 5px 0 20px rgba(0,0,0,0.5);
            overflow-y: auto;
        }

        #sidebar.active { left: 0; }

        .toggle-btn {
            position: fixed;
            left: 20px;
            top: 20px;
            z-index: 1001;
            background: var(--primary);
            border: none;
            color: white;
            padding: 10px 15px;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 15px var(--primary);
        }

        /* لوحة التحكم داخل القائمة */
        .admin-box {
            background: var(--glass);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        input, textarea, select {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border-radius: 5px;
            border: none;
            background: rgba(255,255,255,0.8);
        }

        /* الحاوية الرئيسية للمحتوى */
        .container {
            padding: 100px 50px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        /* تصميم البطاقات (المربعات) */
        .card {
            background: var(--glass);
            border-radius: 20px;
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.1);
            transition: 0.4s;
            position: relative;
        }

        .card:hover { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(0,0,0,0.4); }

        .media-container img, .media-container video {
            width: 100%;
            display: block;
            transition: 0.5s;
            cursor: pointer;
        }

        .card-content {
            padding: 20px;
            max-height: 0;
            overflow: hidden;
            transition: 0.5s ease;
            background: rgba(0,0,0,0.8);
        }

        .card.expanded .card-content {
            max-height: 500px;
            overflow-y: auto;
        }

        /* شريط التحكم بالفيديو */
        .video-controls {
            display: flex;
            gap: 10px;
            padding: 10px;
            background: #222;
        }

        .delete-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: red;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            display: none; /* تظهر فقط في وضع الإدارة */
        }

        .admin-mode .delete-btn { display: block; }

        h2 { border-bottom: 2px solid var(--primary); padding-bottom: 10px; }
    </style>
</head>
<body id="mainBody">

    <button class="toggle-btn" onclick="toggleSidebar()"><i class="fas fa-bars"></i></button>

    <div id="sidebar">
        <h2 id="welcome-msg">مرحباً mahir</h2>
        
        <div id="login-section">
            <input type="text" id="userIn" placeholder="اسم المستخدم">
            <input type="password" id="passIn" placeholder="كلمة السر">
            <button onclick="login()" style="width:100%; background: var(--accent);">دخول للنظام</button>
        </div>

        <div id="edit-section" style="display:none;">
            <div class="admin-box">
                <h3>إضافة محتوى جديد</h3>
                <select id="item-type">
                    <option value="image">صورة</option>
                    <option value="video">فيديو</option>
                </select>
                <input type="text" id="item-url" placeholder="رابط (Image/Video URL)">
                <input type="text" id="item-title" placeholder="العنوان">
                <textarea id="item-desc" placeholder="الوصف (كتابة طويلة كما تريد)"></textarea>
                <button onclick="addItem()" style="background:green;">إضافة للعرض</button>
            </div>

            <div class="admin-box">
                <h3>إعدادات الحساب</h3>
                <input type="text" id="new-user" placeholder="تغيير الاسم">
                <input type="password" id="new-pass" placeholder="تغيير الباسورد">
                <button onclick="updateAccount()">تحديث البيانات</button>
            </div>

            <button onclick="logout()" style="background:#c0392b;">خروج</button>
        </div>
    </div>

    <div class="container" id="content-grid">
        </div>

    <script>
        let currentUser = localStorage.getItem('user') || 'mahir';
        let currentPass = localStorage.getItem('pass') || '12345';
        let isAdmin = false;

        // تحميل البيانات المحفوظة
        let siteItems = JSON.parse(localStorage.getItem('siteItems')) || [
            { type: 'image', url: 'https://images.unsplash.com/photo-1451187580459-43490279c0fa', title: 'البداية', desc: 'هذا مثال لصورة، اضغط عليها لرؤية النص الطويل الذي يمكن وضعه هنا.' },
            { type: 'video', url: 'http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4', title: 'فيديو توضيحي', desc: 'يمكنك إضافة فيديوهات بروابط مباشرة والتحكم فيها.' }
        ];

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('active');
        }

        function login() {
            const u = document.getElementById('userIn').value;
            const p = document.getElementById('passIn').value;
            if(u === currentUser && p === currentPass) {
                isAdmin = true;
                document.getElementById('login-section').style.display = 'none';
                document.getElementById('edit-section').style.display = 'block';
                document.body.classList.add('admin-mode');
                document.getElementById('welcome-msg').innerText = "لوحة تحكم " + currentUser;
            } else {
                alert("بيانات خاطئة!");
            }
        }

        function logout() {
            isAdmin = false;
            location.reload();
        }

        function updateAccount() {
            const nU = document.getElementById('new-user').value;
            const nP = document.getElementById('new-pass').value;
            if(nU) { currentUser = nU; localStorage.setItem('user', nU); }
            if(nP) { currentPass = nP; localStorage.setItem('pass', nP); }
            alert("تم التحديث بنجاح!");
        }

        function addItem() {
            const newItem = {
                type: document.getElementById('item-type').value,
                url: document.getElementById('item-url').value || 'https://via.placeholder.com/400',
                title: document.getElementById('item-title').value,
                desc: document.getElementById('item-desc').value
            };
            siteItems.push(newItem);
            renderSite();
            saveData();
        }

        function deleteItem(index) {
            siteItems.splice(index, 1);
            renderSite();
            saveData();
        }

        function saveData() {
            localStorage.setItem('siteItems', JSON.stringify(siteItems));
        }

        function renderSite() {
            const grid = document.getElementById('content-grid');
            grid.innerHTML = '';
            siteItems.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'card';
                
                let mediaHtml = item.type === 'image' 
                    ? `<img src="${item.url}" onclick="expandCard(this)">` 
                    : `<video src="${item.url}" id="vid-${index}"></video>
                       <div class="video-controls">
                           <button onclick="document.getElementById('vid-${index}').play()"><i class="fas fa-play"></i></button>
                           <button onclick="document.getElementById('vid-${index}').pause()"><i class="fas fa-pause"></i></button>
                           <input type="range" min="0" max="1" step="0.1" onchange="document.getElementById('vid-${index}').volume = this.value">
                       </div>`;

                card.innerHTML = `
                    <button class="delete-btn" onclick="deleteItem(${index})">&times;</button>
                    <div class="media-container" onclick="${item.type === 'video' ? 'expandCard(this)' : ''}">
                        ${mediaHtml}
                    </div>
                    <div class="card-content">
                        <h3>${item.title}</h3>
                        <p>${item.desc}</p>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function expandCard(el) {
            const card = el.closest('.card');
            card.classList.toggle('expanded');
        }

        // تشغيل العرض عند البدء
        renderSite();
    </script>
</body>
</html>
